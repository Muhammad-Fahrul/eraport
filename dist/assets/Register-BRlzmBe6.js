import{a as k,b as q,r as s,j as e,L as G,d as X,s as I}from"./index-C4EYCwQF.js";import{u as W}from"./userApiSlice-DAim06lb.js";const w=/^[A-z][A-z0-9-_]{3,23}$/,N=/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%]).{8,24}$/,J=()=>{var v;const E=k(),o=q(),l=s.useRef(),S=s.useRef(),[a,y]=s.useState(""),[u,R]=s.useState(!1),[M,d]=s.useState(!1),[t,F]=s.useState(""),[f,C]=s.useState(!1),[P,p]=s.useState(!1),[i,U]=s.useState(""),[m,_]=s.useState(!1),[A,h]=s.useState(!1),[x,j]=s.useState(""),[B,{isSuccess:g,isLoading:L,isError:z,error:c}]=W();s.useEffect(()=>{l.current.focus()},[]),s.useEffect(()=>{R(w.test(a))},[a]),s.useEffect(()=>{C(N.test(t)),_(t===i)},[t,i]),s.useEffect(()=>{g&&o("/login")},[g,o]),s.useEffect(()=>{j("")},[a,t,i]);const $=async r=>{var b;r.preventDefault();const D=w.test(a),V=N.test(t);if(!D||!V){j("Invalid Entry");return}try{const n=await B({username:a,password:t}).unwrap();E(I({...n}))}catch(n){console.error(((b=n==null?void 0:n.data)==null?void 0:b.message)||n.error)}};return e.jsxs("div",{className:"container-register",children:[L&&e.jsx(G,{}),e.jsxs("form",{className:"wrapper",onSubmit:$,children:[e.jsxs("div",{className:"title",style:{textAlign:"center"},children:[e.jsx("h1",{style:{fontSize:"1em"},children:"Sign Up"}),e.jsx("p",{ref:S,className:x?"errmsg":"offscreen","aria-live":"assertive",children:x}),e.jsx("p",{className:z?"":"offscreen",children:(v=c==null?void 0:c.data)==null?void 0:v.message})]}),e.jsxs("div",{className:"inputBox",children:[e.jsx("input",{autoComplete:"off",className:"__input",name:"username",placeholder:"Username",type:"text",ref:l,value:a,"aria-invalid":u?"false":"true","aria-describedby":"uidnote",onFocus:()=>d(!0),onBlur:()=>d(!1),onChange:r=>y(r.target.value)}),e.jsx("span",{children:"Username"}),e.jsxs("p",{id:"uidnote",className:M&&a&&!u?"instructions":"offscreen",children:["4 to 24 characters.",e.jsx("br",{}),"Must begin with a letter.",e.jsx("br",{}),"Letters, numbers, underscores, hyphens allowed."]})]}),e.jsxs("div",{className:"inputBox",children:[e.jsx("input",{autoComplete:"off",name:"password",onChange:r=>F(r.target.value),value:t,required:!0,"aria-invalid":f?"false":"true","aria-describedby":"confirmnote",onFocus:()=>p(!0),onBlur:()=>p(!1)}),e.jsx("span",{children:"Password"}),e.jsxs("p",{id:"pwdnote",className:P&&!f?"instructions":"offscreen",children:["8 to 24 characters.",e.jsx("br",{}),"Must include uppercase and lowercase letters, a number and a special character.",e.jsx("br",{}),"Allowed special characters:"," ",e.jsx("span",{"aria-label":"exclamation mark",children:"!"})," ",e.jsx("span",{"aria-label":"at symbol",children:"@"})," ",e.jsx("span",{"aria-label":"hashtag",children:"#"})," ",e.jsx("span",{"aria-label":"dollar sign",children:"$"})," ",e.jsx("span",{"aria-label":"percent",children:"%"})]})]}),e.jsxs("div",{className:"inputBox",children:[e.jsx("input",{className:"__input",autoComplete:"off",name:"password",onChange:r=>U(r.target.value),value:i,required:!0,"aria-invalid":m?"false":"true","aria-describedby":"confirmnote",onFocus:()=>h(!0),onBlur:()=>h(!1)}),e.jsx("span",{children:"Confirm"}),e.jsx("p",{id:"confirmnote",className:A&&!m?"instructions":"offscreen",children:"Must match the first password input field."})]}),e.jsx("button",{className:"enter",children:"Register"})]}),e.jsxs("p",{children:["Already registered?",e.jsx("span",{className:"line",children:e.jsx(X,{to:"/login",children:"Login"})})]})]})};export{J as default};
