import{e as $,g as b,r as E,j as e,L as m,P as n}from"./index-C4EYCwQF.js";const u="/api/records",I=$.injectEndpoints({endpoints:d=>({getRecord:d.query({query:({username:s,raportId:i})=>({url:`${u}/${s}/${i}`,validateStatus:(r,c)=>r.status===200&&!c.isError}),providesTags:[{type:"Record",id:"LIST"}]}),addRecord:d.mutation({query:({studentId:s,raportId:i,...r})=>({url:`${u}/${s}/${i}`,method:"POST",body:r}),invalidatesTags:[{type:"Record",id:"LIST"},"Report"]}),deleteRecord:d.mutation({query:({studentId:s,raportId:i,recordId:r})=>({url:`${u}/${s}/${i}/${r}`,method:"DELETE"}),invalidatesTags:[{type:"Record",id:"LIST"},"User","Report"]})})}),{useAddRecordMutation:L,useGetRecordQuery:A,useDeleteRecordMutation:S}=I,f=({studentId:d,raportId:s,raportStatus:i,record:r,setScreen:c,isDemo:R=!1})=>{var x;const g=b(),[T,{isLaoding:p,isSuccess:h,isError:j,error:l}]=S(),y=t=>{t.target.className==="container-raport-detail"&&c(!1)},D=async t=>{if(!R){confirm("anda yakin ingin menghapus record ini?")&&await T({studentId:d,recordId:t,raportId:s});return}alert("fungsi ini hanya demo")};return E.useEffect(()=>{h&&c(!1)},[h,j,c]),p?e.jsx(m,{}):e.jsxs("div",{className:"container-raport-detail",onClick:y,children:[e.jsxs("div",{className:"wrapper-raport-detail",children:[j&&e.jsx("p",{children:(x=l==null?void 0:l.data)==null?void 0:x.message}),e.jsxs("div",{children:[e.jsx("h3",{children:"Detail"}),g.isMentor&&i&&e.jsx("button",{className:"delete",onClick:()=>D(r._id),children:e.jsx("i",{className:"fa-solid fa-trash-can"})})]}),e.jsx("table",{children:e.jsx("tbody",{children:Object.entries(r).map(([t,a])=>{if(!(t==="_id"||t==="studentId"||t==="raportId"||t==="updatedAt"||t==="__v")){if(t==="createdAt"){const o=new Date(a.split("T"));return e.jsxs("tr",{children:[e.jsx("th",{children:"Tanggal"}),e.jsx("td",{children:": "}),e.jsx("td",{children:new Intl.DateTimeFormat("id-ID",{year:"numeric",month:"2-digit",day:"2-digit"}).format(o)})]},t)}return Array.isArray(a)?e.jsxs("tr",{className:"arrayItem",children:[e.jsx("th",{children:t}),e.jsx("td",{children:":"}),e.jsx("td",{children:a.map(o=>e.jsx("li",{children:o},o))})]},t+a[0]):e.jsxs("tr",{children:[e.jsx("th",{children:t}),e.jsx("td",{children:": "}),e.jsx("td",{children:a})]},t+a)}})})})]}),p&&e.jsx(m,{})]})};f.propTypes={studentId:n.string,raportId:n.string,raportStatus:n.bool,record:n.object.isRequired,setScreen:n.func.isRequired,isDemo:n.bool};const q=Object.freeze(Object.defineProperty({__proto__:null,RecordDetail:f},Symbol.toStringTag,{value:"Module"}));export{f as R,A as a,q as b,L as u};
